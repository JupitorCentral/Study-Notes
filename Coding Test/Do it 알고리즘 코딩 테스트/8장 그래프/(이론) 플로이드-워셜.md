
## 플로이드-워셜 알고리즘이란 ?

그래프에서 최단 거리를 구하는 알고리즘

### 기능

모든 노드 간에 최단 경로 탐색

### 특징
1. 음수 가중치 엣지가 있어도 수행가능
2. 동적 계획법의 원리를 사용

### 시간 복잡도

$O(V^3)$

## 과정

1. **초기화:**
	-   `D` 라는 2차원 배열을 생성하여 모든 노드 간의 최단 거리를 저장한다.
	-   `D[i][j]` 는 노드 `i` 에서 노드 `j` 로 가는 최단 거리를 의미한다.
	-   자기 자신으로 가는 거리 `D[i][i]` 는 0으로 초기화한다.
	-   직접 연결된 간선이 있는 경우, `D[i][j]` 는 간선의 가중치로 초기화한다.
	-   직접 연결된 간선이 없는 경우, `D[i][j]` 는 무한대(`∞`)로 초기화한다.

2. **메인 반복:**
	-   `k` 를 중간 경유 노드라고 하자.
	-   총 노드의 수만큼 `k` 를 1부터 `N` 까지 순차적으로 반복한다.
	-   각 `k` 에 대해, 모든 노드 쌍 `(i, j)` 에 대해 다음 업데이트를 수행한다.

3. **업데이트 규칙:**
	-   `D[i][j]` 와 `D[i][k] + D[k][j]` 를 비교한다.
	-   만약 `D[i][j] > D[i][k] + D[k][j]` 라면, 노드 `k` 를 거쳐가는 경로가 더 짧다는 의미이므로 `D[i][j]` 를 `D[i][k] + D[k][j]` 로 업데이트한다.
	-   즉, 점화식은 다음과 같다.
		$D_{ij}^{(k)} = min(D_{ij}^{(k-1)}, D_{ik}^{(k-1)} + D_{kj}^{(k-1)})$

4. **결과:**
	-   모든 `k` 에 대한 반복이 끝나면, `D` 배열에는 모든 노드 쌍 간의 최단 거리가 저장된다.

## 과정 추이

**예시 그래프:**

<img src="../../../assets/플로이드_워셜_1.png" width="300">
<br>
<br>

**초기화 (k = 0):**

|       | 1   | 2   | 3   | 4   | 5   | 6   |
| :---- | :-- | :-- | :-- | :-- | :-- | :-- |
| **1** | 0   | 2   | ∞   | ∞   | ∞   | ∞   |
| **2** | ∞   | 0   | 1   | ∞   | 3   | ∞   |
| **3** | ∞   | ∞   | 0   | 1   | ∞   | ∞   |
| **4** | ∞   | ∞   | ∞   | 0   | ∞   | ∞   |
| **5** | ∞   | ∞   | ∞   | 5   | 0   | ∞   |
| **6** | 4   | ∞   | ∞   | ∞   | 1   | 0   |

**k = 1:**

|       | 1   | 2   | 3   | 4   | 5   | 6   |
| :---- | :-- | :-- | :-- | :-- | :-- | :-- |
| **1** | 0   | 2   | ∞   | ∞   | ∞   | ∞   |
| **2** | ∞   | 0   | 1   | ∞   | 3   | ∞   |
| **3** | ∞   | ∞   | 0   | 1   | ∞   | ∞   |
| **4** | ∞   | ∞   | ∞   | 0   | ∞   | ∞   |
| **5** | ∞   | ∞   | ∞   | 5   | 0   | ∞   |
| **6** | 4   | 6   | ∞   | ∞   | 1   | 0   |  (D[6][2] = min(∞, D[6][1] + D[1][2]) = min(∞, 4 + 2) = 6)

**k = 2:**

|       | 1   | 2   | 3   | 4   | 5   | 6   |
| :---- | :-- | :-- | :-- | :-- | :-- | :-- |
| **1** | 0   | 2   | 3   | ∞   | 5   | ∞   |  (D[1][3] = min(∞, D[1][2] + D[2][3]) = min(∞, 2 + 1) = 3), (D[1][5] = min(∞, D[1][2] + D[2][5]) = min(∞, 2 + 3) = 5)
| **2** | ∞   | 0   | 1   | ∞   | 3   | ∞   |
| **3** | ∞   | ∞   | 0   | 1   | ∞   | ∞   |
| **4** | ∞   | ∞   | ∞   | 0   | ∞   | ∞   |
| **5** | ∞   | ∞   | ∞   | 5   | 0   | ∞   |
| **6** | 4   | 6   | 7   | ∞   | 1   | 0   |  (D[6][3] = min(∞, D[6][2] + D[2][3]) = min(∞, 6 + 1) = 7)

**k = 3:**

|       | 1   | 2   | 3   | 4   | 5   | 6   |
| :---- | :-- | :-- | :-- | :-- | :-- | :-- |
| **1** | 0   | 2   | 3   | 4   | 5   | ∞   |  (D[1][4] = min(∞, D[1][3] + D[3][4]) = min(∞, 3 + 1) = 4)
| **2** | ∞   | 0   | 1   | 2   | 3   | ∞   |  (D[2][4] = min(∞, D[2][3] + D[3][4]) = min(∞, 1 + 1) = 2)
| **3** | ∞   | ∞   | 0   | 1   | ∞   | ∞   |
| **4** | ∞   | ∞   | ∞   | 0   | ∞   | ∞   |
| **5** | ∞   | ∞   | ∞   | 5   | 0   | ∞   |
| **6** | 4   | 6   | 7   | 8   | 1   | 0   |  (D[6][4] = min(∞, D[6][3] + D[3][4]) = min(∞, 7 + 1) = 8)

**k = 4:**

|       | 1   | 2   | 3   | 4   | 5   | 6   |
| :---- | :-- | :-- | :-- | :-- | :-- | :-- |
| **1** | 0   | 2   | 3   | 4   | 5   | ∞   |
| **2** | ∞   | 0   | 1   | 2   | 3   | ∞   |
| **3** | ∞   | ∞   | 0   | 1   | ∞   | ∞   |
| **4** | ∞   | ∞   | ∞   | 0   | ∞   | ∞   |
| **5** | ∞   | ∞   | ∞   | 5   | 0   | ∞   |
| **6** | 4   | 6   | 7   | 8   | 1   | 0   |

**k = 5:**

|       | 1   | 2   | 3   | 4   | 5   | 6   |
| :---- | :-- | :-- | :-- | :-- | :-- | :-- |
| **1** | 0   | 2   | 3   | 4   | 5   | ∞   |
| **2** | ∞   | 0   | 1   | 2   | 3   | ∞   |
| **3** | ∞   | ∞   | 0   | 1   | ∞   | ∞   |
| **4** | ∞   | ∞   | ∞   | 0   | ∞   | ∞   |
| **5** | ∞   | ∞   | ∞   | 5   | 0   | ∞   |
| **6** | 4   | 6   | 7   | 6   | 1   | 0   |  (D[6][4] = min(8, D[6][5] + D[5][4]) = min(8, 1 + 5) = 6)

**k = 6:**

|       | 1   | 2   | 3   | 4   | 5   | 6   |
| :---- | :-- | :-- | :-- | :-- | :-- | :-- |
| **1** | 0   | 2   | 3   | 4   | 5   | ∞   |
| **2** | ∞   | 0   | 1   | 2   | 3   | ∞   |
| **3** | ∞   | ∞   | 0   | 1   | ∞   | ∞   |
| **4** | ∞   | ∞   | ∞   | 0   | ∞   | ∞   |
| **5** | ∞   | ∞   | ∞   | 5   | 0   | ∞   |
| **6** | 4   | 6   | 7   | 6   | 1   | 0   |

**최종 결과:**

|       | 1   | 2   | 3   | 4   | 5   | 6   |
| :---- | :-- | :-- | :-- | :-- | :-- | :-- |
| **1** | 0   | 2   | 3   | 4   | 5   | ∞   |
| **2** | ∞   | 0   | 1   | 2   | 3   | ∞   |
| **3** | ∞   | ∞   | 0   | 1   | ∞   | ∞   |
| **4** | ∞   | ∞   | ∞   | 0   | ∞   | ∞   |
| **5** | ∞   | ∞   | ∞   | 5   | 0   | ∞   |
| **6** | 4   | 6   | 7   | 6   | 1   | 0   |
